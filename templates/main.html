<!DOCTYPE html>
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-164854974-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-164854974-1');
  </script>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1">

  <!-- Mapbox Assembly -->
  <link href="https://api.mapbox.com/mapbox-assembly/v0.24.0/assembly.min.css" rel="stylesheet">
  <script async defer src="https://api.mapbox.com/mapbox-assembly/v0.24.0/assembly.js"></script>

  <!-- D3 -->
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="https://d3js.org/colorbrewer.v1.min.js"></script>

  <!-- Local stylesheet -->
  <link rel="stylesheet" href="css/site.css" type="text/css">
  <script src="js/functions.js"></script>

</head>

<body>

	<header class='px24 py12 my24 mx-auto container bg-blue-faint border border--light'>
    
		<h1 class='txt-h1 align-center'>COVID 19 Tweets</h1>

		<h3 class='txt-h3 align-center'>SubHeader</h3>

    </header>

  <section class='container px12 py12 border border--light'>

  	<div class='prose align-left'>
		<p>Each point is a retweet of a specific tweet...</p>
	</div>
      
      
    {{{ PLOTLY_1 }}}


    <div id='selected-tweet'>
      <p id='tweet-text'>Hover over a tweet to see the text here</p>
    </div>
    
  </section>
    
    
    <script type='text/javascript'>
        
        console.log("hi");
        
        var myPlot = document.getElementsByClassName('plotly-graph-div js-plotly-plot')[0];
        console.log(myPlot)
        
        myPlot.on('plotly_click', function(data){

              var pn='',
                  tn='',
                  colors=[];
              for(var i=0; i < data.points.length; i++){
                pn = data.points[i].pointNumber;
                tn = data.points[i].curveNumber;
                colors = data.points[i].data.marker.color;
              };
              colors[pn] = '#C54C82';

              var update = {'marker':{color: colors, size:16}};
              Plotly.restyle("bc9af3c5-1553-4c61-a791-2248dd2164b7", update, [tn]);

            console.log(data)
        })

        
    </script>

</body>
</html>